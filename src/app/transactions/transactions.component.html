<!-- All Transactions -->
<div class="row">
  <div id="recent-transactions" class="col-12">
    <div class="card">
      <div class="card-header">
        <h4 class="card-title">ALL TRANSACTIONS </h4>
        <a class="heading-elements-toggle"><i class="la la-ellipsis-v font-medium-3"></i></a>
        <div class="heading-elements">
          <ul class="list-inline mb-0">
            <li>
              <a class="btn btn-sm box-shadow-2 round btn-min-width pull-right" style="color:white!important;"
                [ngClass]="{'btn-danger': filterStatus === 'Activate', 'btn-success': filterStatus === 'Deactivate'}"
                (click)="handleDateFilterActivation()">{{filterStatus}} Date Filter
              </a>
            </li>
          </ul>
        </div>
        <hr>

      </div>
      <div class="card-content">
        <mat-form-field style="margin: 0 2em 1em 2em; border-bottom:1px solid; width: 25% !important;"
          *ngIf="filterStatus === 'Activate'; else dateFilter;">
          <input matInput (keyup)="applyFilter($event.target.value)"
            (focus)="hidShowPlaceHolder($event.target.value, 'onFocus')"
            (blur)="hidShowPlaceHolder($event.target.value, 'onBlur')" placeholder="{{myplaceHolder}}">
        </mat-form-field>
        <ng-template #dateFilter>
          <div class="ml-2">
            <span>
              <label for="from" class="mr-1"> From: </label>
              <mat-form-field style="border-bottom:1px solid; width: 15% !important;">
                <input type="date" #dateFrom matInput (change)="handleDateFilter(dateFrom.value, 'from')">
              </mat-form-field>
            </span>

            <span class="ml-1">
              <label for="to" class="mr-1"> To: </label>
              <mat-form-field style=" border-bottom:1px solid; width: 15% !important;">
                <input type="date" #dateTo matInput (change)="handleDateFilter(dateTo.value, 'to')">
              </mat-form-field>
            </span>
          </div>



        </ng-template>

        <div class="mat-elevation-z8 table-responsive">
          <div id="steady-spinner" *ngIf="!dataSource; else displayTable"></div>

          <ng-template #displayTable>
            <table mat-table *ngIf="dataSource.data.length > 0; else noItems"
              [dataSource]="dataSource | filter: filterColumn:filterSearch" matSort id="recent-orders"
              class="table table-hover mb-0">

              <!-- Index Column -->
              <ng-container matColumnDef="index">
                <th id="fixPadding" mat-header-cell *matHeaderCellDef mat-sort-header> Index </th>
                <td id="fixPadding" mat-cell *matCellDef="let row; let i = index;" class="text-truncate"
                  (click)="handleNavigation(row.id)">
                  <a style="color:#00BCD4;">
                    TRANS-{{i + paginationUrl.viewCountStart}}
                  </a>
                </td>

              </ng-container>


              <!-- Description Column -->
              <ng-container matColumnDef="description">
                <th id="fixPadding" mat-header-cell *matHeaderCellDef mat-sort-header> Description </th>
                <td id="fixPadding" mat-cell *matCellDef="let row" class="text-truncate"
                  (click)="handleNavigation(row.id)">
                  <span>{{row.requirement_description | titlecase | shorten}}</span>
                </td>
              </ng-container>

              <!-- Provider Column -->
              <ng-container matColumnDef="provider">
                <th id="fixPadding" mat-header-cell *matHeaderCellDef mat-sort-header> Provider </th>
                <td id="fixPadding" mat-cell *matCellDef="let row" class="text-truncate"
                  (click)="handleNavigation(row.id)">
                  <span>{{row.service_provider.name | shorten : 'name'}}</span>
                </td>
              </ng-container>


              <!-- PaymentMode Column -->
              <ng-container matColumnDef="paymentMode">
                <th id="fixPadding" mat-header-cell *matHeaderCellDef mat-sort-header> Pay-Type </th>
                <td id="fixPadding" mat-cell *matCellDef="let row" class="text-truncate"
                  (click)="handleNavigation(row.id)">
                  <button type="button" *ngIf="row.payment_mode !== 'bank_transfer'; else bank" class="btn btn-sm round"
                    [ngClass]="{ 'btn-outline-info' : row.payment_mode === 'cash',
                  'btn-outline-success' : row.payment_mode === 'card'
                  }">{{row.payment_mode | titlecase}}</button>
                  <ng-template #bank>
                    <button type="button" class="btn btn-sm btn-outline-warning round">Bank Transfer</button>
                  </ng-template>
                </td>
              </ng-container>

              <!-- Status Column -->
              <ng-container matColumnDef="status">
                <th id="fixPadding" mat-header-cell *matHeaderCellDef mat-sort-header> Status </th>
                <td id="fixPadding" mat-cell *matCellDef="let row" class="text-truncate"
                  (click)="handleNavigation(row.id)">
                  <i class="la la-dot-circle-o  font-medium-1" [ngClass]="{ 'success' : row.status === 'completed',
                  'info' : row.status === 'accepted',
                  'danger' : row.status === 'cancel',
                  'warning' : row.status === 'ongoing'
                  }"></i>
                  {{row.status | titlecase}}
                </td>
              </ng-container>

              <!-- dateOfDelivery Column -->
              <ng-container matColumnDef="dateOfDelivery">
                <th id="fixPadding" mat-header-cell *matHeaderCellDef mat-sort-header> DeliveryDate</th>
                <td id="fixPadding" mat-cell *matCellDef="let row" class="text-truncate"
                  (click)="handleNavigation(row.id)">
                  <span *ngIf="row.service_deliver_on === 'Not Due'; else dateFilter">{{row.service_deliver_on }}</span>
                  <ng-template #dateFilter>
                    <span>{{row.service_deliver_on | date: 'longDate' }}</span>
                  </ng-template>
                </td>
              </ng-container>

              <!-- TotalAmount Column -->
              <ng-container matColumnDef="totalAmount">
                <th id="fixPadding" mat-header-cell *matHeaderCellDef mat-sort-header> Amount </th>
                <td id="fixPadding" mat-cell *matCellDef="let row" class="text-truncate"
                  (click)="handleNavigation(row.id)">
                  <span>{{row.total_amount | currency: 'NGN ' | shorten : 'currency'}}</span>
                </td>
              </ng-container>

              <!-- Action Column -->
              <ng-container matColumnDef="action">
                <th id="fixPadding" mat-header-cell *matHeaderCellDef mat-sort-header> Action</th>
                <td id="fixPadding" mat-cell *matCellDef="let row">
                  <i class="la la-link success font-large-1" style="cursor: pointer;"
                    (click)="handleNavigation(row.id)"></i>
                  <i class="la la-trash danger font-large-1" (click)="handleDelete(element.id)"
                    style="cursor: pointer;"></i>

                </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns;">
              </tr>
            </table>
            <ng-template #noItems>
              <mat-card class="text-center">No Items Available</mat-card>
            </ng-template>
          </ng-template>

          <div class="mat-paginator-outer-container">
            <div class="mat-paginator-container">
              <div class="mat-paginator-page-size ng-star-inserted">
                <div class="mat-paginator-page-size-label">Items per page:</div>
                <div class="ng-star-inserted">10</div>
              </div>
              <div class="mat-paginator-range-actions">
                <div class="mat-paginator-range-label">{{paginationUrl.viewCountStart}} -
                  {{paginationUrl.viewCountEnd}}
                  of
                  {{totalItemCount}}</div>

                <button class="mat-paginator-navigation-previous mat-icon-button" mat-icon-button="" type="button"
                  [disabled]="!paginationUrl?.previous" (click)="handlePagination('previous')">
                  <span class="mat-button-wrapper">
                    <svg class="mat-paginator-icon" focusable="false" viewBox="0 0 24 24">
                      <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"></path>
                    </svg>
                  </span>
                  <div class="mat-button-ripple mat-ripple mat-button-ripple-round">
                  </div>
                  <div class="mat-button-focus-overlay"></div>
                </button>

                <button class="mat-paginator-navigation-next mat-icon-button" mat-icon-button="" type="button"
                  [disabled]="!paginationUrl?.next" (click)="handlePagination('next')">
                  <span class="mat-button-wrapper">
                    <svg class="mat-paginator-icon" focusable="false" viewBox="0 0 24 24">
                      <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path>
                    </svg>
                  </span>
                  <div class="mat-button-ripple mat-ripple mat-button-ripple-round"></div>
                  <div class="mat-button-focus-overlay"></div>
                </button>

              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>
<!--/ All Transactions -->
